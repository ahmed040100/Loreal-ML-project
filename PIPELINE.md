```
┌─────────────────┐
│  Text Input     │
└────────┬────────┘
         │
         ▼
┌─────────────────────────────────┐
│  Text Cleaning + Features       │
│  - Extract sizes                │
│  - Remove duplicates            │
│  - Normalize + expand abbr      │
│  - Keyword features (26)        │
│  - Text stats (7)               │
└────────┬────────────────────────┘
         │
         ▼
┌─────────────────────────────────┐
│  Split: Train/Val/Test          │
│  3308 / 414 / 414              │
└────────┬────────────────────────┘
         │
         ▼
┌─────────────────────────────────┐
│  TF-IDF Trigrams (1800)         │
│  + Engineered (33)              │
│  = 1833 total features          │
└────────┬────────────────────────┘
         │
         ▼
┌──────────────────────────────────────────────────────┐
│  ClassifierChain                                     │
│  ┌────────────────────────────────────────────────┐ │
│  │ XGB #1: fine_wrinkles                          │ │
│  ├────────────────────────────────────────────────┤ │
│  │ XGB #2: lack_radiance       (+ pred #1)       │ │
│  ├────────────────────────────────────────────────┤ │
│  │ XGB #3: acne                 (+ preds #1-2)    │ │
│  ├────────────────────────────────────────────────┤ │
│  │ XGB #4: pores                (+ preds #1-3)    │ │
│  ├────────────────────────────────────────────────┤ │
│  │ XGB #5: dry                 (+ preds #1-4)    │ │
│  ├────────────────────────────────────────────────┤ │
│  │ XGB #6: normal              (+ preds #1-5)    │ │
│  ├────────────────────────────────────────────────┤ │
│  │ XGB #7: oily                (+ preds #1-6)    │ │
│  ├────────────────────────────────────────────────┤ │
│  │ XGB #8: combination          (+ preds #1-7)    │ │
│  ├────────────────────────────────────────────────┤ │
│  │ XGB #9: lack_firmness        (+ preds #1-8)    │ │
│  ├────────────────────────────────────────────────┤ │
│  │ XGB #10: dark_pigmentation   (+ preds #1-9)    │ │
│  ├────────────────────────────────────────────────┤ │
│  │ XGB #11: sensitivity-high    (+ preds #1-10)   │ │
│  └────────────────────────────────────────────────┘ │
│                                                       │
│  XGBoost: hist/cuda, 1500 trees, lr=0.008, depth=9  │
└────────┬─────────────────────────────────────────────┘
         │
         ▼
┌─────────────────────────────────┐
│  Probabilities (11 labels)      │
└────────┬────────────────────────┘
         │
         ▼
┌─────────────────────────────────┐
│  Threshold Optimization          │
│  (Validation Set)               │
│  - Step 1: Per-label grid       │
│  - Step 2: Global fine-tune     │
│  - Range: [0.25, 0.75]          │
└────────┬────────────────────────┘
         │
         ▼
┌─────────────────────────────────┐
│  Final Predictions              │
│  if P(y) > threshold → 1        │
└────────┬────────────────────────┘
         │
         ▼
┌─────────────────────────────────┐
│  F1 Micro: 0.7315               │
│  F1 Macro: 0.6971               │
│  Hamming: 0.1012                │
└─────────────────────────────────┘
```
